<head>
	<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"> 
	<link rel='stylesheet' type='text/css' href='external/territory.css?rev=13'>
	<title>Territory - beta</title>
	
<script src="/socket.io/socket.io.js"></script>

</head>
<body>
<div class="outer" id='pop'>
  <div class="middle">
    <div class="inner" id='mediaplay'>
<center>
	<div class='infob'>
      <h1>Territory</h1>
      <p>Claim it all!</p>
	</div>
	<hr>
	<div id='game-pos'></div><br>
	<div id='game-score'></div><br>
	<button onclick="unlock();" id='game-button'>Begin</button>
</center>
    </div>
  </div>
</div>
	<canvas id='game'>Sorry, your browser does not support Territory (try using chrome)</canvas>
<div class='overlay' id='fps'>
</div>

</body>
<script>

var c = document.getElementById('game'),
canvas = c.getContext('2d');
c.width = window.innerWidth;
c.height = window.innerHeight;
canvas.beginPath();
canvas.rect(0, 0, window.innerWidth, window.innerHeight);
canvas.fillStyle = "#1e1e1e";
canvas.fill();

	width = window.innerWidth;
	height = window.innerHeight;
	console.log(width);
	console.log(height);
	document.getElementById("game").innerHTML = "";
	blocksx = Math.round(width / 40 - 1);
	blocksy = Math.round(height / 40);

	var tw = 0;
	var th = 0;

			canvas.beginPath();
			canvas.rect(0, 0, 40, 40);
			canvas.fillStyle = "purple";
			canvas.fill();

	for (var i = 0; i < blocksy; i++) {
		for (var b = 0; b <= blocksx; b++) {
			canvas.beginPath();
			canvas.rect(tw, th, tw + 40, th + 40);
			canvas.fillStyle = "#1e1e1e";
			canvas.fill();
			tw = tw + 40;
		}
	}




function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
} 


function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
} 


  var socket = io();


//socket.emit("new-user", "help");

socket.emit("new-join", "1492128841238");
var x, y, color;
    socket.on('info', function(msg){
	var inf = msg.split(",");
	document.getElementById("game-pos").innerHTML = inf[0] + ", " + inf[1];
	x = inf[0];
	y = inf[1];
	color = inf[2];
    });


    socket.on('new-info', function(msg){
	alert("Success! your uuid is " + msg);
	setCookie("id", msg, 365 * 5);
    });

</script>

