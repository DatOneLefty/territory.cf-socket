<head>
	<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"> 
	<link rel='stylesheet' type='text/css' href='external/territory.css?rev=13'>
	<title>Territory - beta</title>
	
<script src="/socket.io/socket.io.js"></script>

</head>
<body>
<div class="outer" id='pop'>
  <div class="middle">
    <div class="inner" id='mediaplay'>
<center>
	<div class='infob'>
      <h1>Territory</h1>
      <p>Claim it all!</p>
	</div>
	<hr>
	<div id='game-pos'></div><br>
	<div id='game-score'></div><br>
	<button onclick="unlock();" id='game-button'>Begin</button>
</center>
    </div>
  </div>
</div>
	<canvas id='game'>Sorry, your browser does not support Territory (try using chrome)</canvas>
<div class='overlay' id='fps'>
</div>

</body>
<script>
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
} 


function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
} 


  var socket = io();

if (getCookie("id") == "") {
socket.emit("new-user", "help");
} else {
socket.emit('new-join', "whoami");
}
var x, y, color;
    socket.on('info', function(msg){
	var inf = msg.split(",");
	document.getElementById("game-pos").innerHTML = inf[0] + ", " + inf[1];
	x = inf[0];
	y = inf[1];
	color = inf[2];
    });


    socket.on('new-info', function(msg){
	alert("Success! your uuid is " + msg);
	setCookie("id", msg, 365 * 5);
    });

</script>

